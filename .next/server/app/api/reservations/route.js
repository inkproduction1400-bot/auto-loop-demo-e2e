(()=>{var e={};e.id=483,e.ids=[483],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6330:e=>{"use strict";e.exports=require("@prisma/client")},6487:()=>{},8335:()=>{},8465:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>d,serverHooks:()=>v,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{GET:()=>c,POST:()=>p});var a=r(2706),n=r(8203),o=r(5994),i=r(9187);async function u(){try{return new(await Promise.resolve().then(r.t.bind(r,6330,23))).PrismaClient}catch{return null}}async function c(){let e=await u();if(!e)return i.NextResponse.json({ok:!0,reservations:[],note:"prisma not available (returning mock data)"},{status:200});try{let t=await e.reservation.findMany({take:50,orderBy:{createdAt:"desc"}});return await e.$disconnect(),i.NextResponse.json({ok:!0,reservations:t})}catch(t){return await e.$disconnect().catch(()=>{}),i.NextResponse.json({ok:!1,error:t?.message??"DB error"},{status:500})}}async function p(e){let t=await u();if(!t)return i.NextResponse.json({ok:!1,error:"prisma not available"},{status:503});try{let r=await e.json().catch(()=>({})),s=await t.reservation.create({data:r??{}});return await t.$disconnect(),i.NextResponse.json({ok:!0,reservation:s},{status:201})}catch(e){return await t.$disconnect().catch(()=>{}),i.NextResponse.json({ok:!1,error:e?.message??"DB error"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/reservations/route",pathname:"/api/reservations",filename:"route",bundlePath:"app/api/reservations/route"},resolvedPagePath:"/Users/nagai/auto-loop-demo/app/api/reservations/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:x,serverHooks:v}=d;function m(){return(0,o.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:x})}},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,452],()=>r(8465));module.exports=s})();