"use strict";(()=>{var e={};e.id=984,e.ids=[984],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1549:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>v});var a={};r.r(a),r.d(a,{GET:()=>c,POST:()=>p});var s=r(9303),n=r(8716),o=r(670),i=r(7070);async function u(){try{return new(await Promise.resolve().then(r.t.bind(r,3524,23))).PrismaClient}catch{return null}}async function c(){let e=await u();if(!e)return i.NextResponse.json({ok:!0,reservations:[],note:"prisma not available (returning mock data)"},{status:200});try{let t=await e.reservation.findMany({take:50,orderBy:{createdAt:"desc"}});return await e.$disconnect(),i.NextResponse.json({ok:!0,reservations:t})}catch(t){return await e.$disconnect().catch(()=>{}),i.NextResponse.json({ok:!1,error:t?.message??"DB error"},{status:500})}}async function p(e){let t=await u();if(!t)return i.NextResponse.json({ok:!1,error:"prisma not available"},{status:503});try{let r=await e.json().catch(()=>({})),a=await t.reservation.create({data:r??{}});return await t.$disconnect(),i.NextResponse.json({ok:!0,reservation:a},{status:201})}catch(e){return await t.$disconnect().catch(()=>{}),i.NextResponse.json({ok:!1,error:e?.message??"DB error"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/reservations/route",pathname:"/api/reservations",filename:"route",bundlePath:"app/api/reservations/route"},resolvedPagePath:"/Users/nagai/auto-loop-demo/app/api/reservations/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:v,serverHooks:m}=d,x="/api/reservations/route";function h(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:v})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,972],()=>r(1549));module.exports=a})();