(()=>{var e={};e.id=729,e.ids=[729],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4715:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>o}),a(4182),a(596),a(1506),a(5866);var s=a(3191),r=a(8716),n=a(7922),i=a.n(n),l=a(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(t,d);let o=["",{children:["admin",{children:["reservations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,4182)),"/Users/nagai/auto-loop-demo/app/admin/reservations/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,596)),"/Users/nagai/auto-loop-demo/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,1506)),"/Users/nagai/auto-loop-demo/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/nagai/auto-loop-demo/app/admin/reservations/page.tsx"],u="/admin/reservations/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/reservations/page",pathname:"/admin/reservations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2817:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,9404,23))},6322:(e,t,a)=>{Promise.resolve().then(a.bind(a,3192))},7794:()=>{},2126:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},3192:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(326),r=a(7577),n=a(434),i=a(5047),l=a(4690),d=a.n(l);function o(e,t,a=""){return(e.get(t)??a).trim()}function c(e,t,a){let s=Number.parseInt(e.get(t)??"",10);return Number.isFinite(s)&&s>0?s:a}function u(){return s.jsx(r.Suspense,{fallback:s.jsx("div",{className:d().meta,children:"読み込み中…"}),children:s.jsx(m,{})})}function m(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),a=o(t,"q"),l=o(t,"status"),u=o(t,"dateFrom"),m=o(t,"dateTo"),h=c(t,"page",1),p=Math.min(100,c(t,"size",20)),[_,x]=(0,r.useState)(null),[g,j]=(0,r.useState)(!0),[v,b]=(0,r.useState)(null);(0,r.useMemo)(()=>{let e=new URLSearchParams;return a&&e.set("q",a),l&&e.set("status",l),u&&e.set("dateFrom",u),m&&e.set("dateTo",m),e.set("page",String(h)),e.set("size",String(p)),`/api/admin/reservations?${e.toString()}`},[a,l,u,m,h,p]);let f=e=>{let a=new URLSearchParams(t.toString());return a.set("page",String(e)),a.set("size",String(p)),`/admin/reservations?${a.toString()}`};return(0,s.jsxs)(s.Fragment,{children:[s.jsx("h1",{className:d().title,children:"予約一覧"}),(0,s.jsxs)("form",{className:d().toolbar,onSubmit:t=>{t.preventDefault();let a=new FormData(t.currentTarget),s=new URLSearchParams,r=String(a.get("q")??"").trim(),n=String(a.get("status")??"").trim(),i=String(a.get("dateFrom")??"").trim(),l=String(a.get("dateTo")??"").trim();r&&s.set("q",r),n&&s.set("status",n),i&&s.set("dateFrom",i),l&&s.set("dateTo",l),s.set("page","1"),s.set("size",String(p)),e.push(`/admin/reservations?${s.toString()}`)},children:[s.jsx("input",{name:"q",placeholder:"キーワード",defaultValue:a}),s.jsx("input",{name:"dateFrom",type:"date",defaultValue:u}),s.jsx("input",{name:"dateTo",type:"date",defaultValue:m}),(0,s.jsxs)("select",{name:"status",defaultValue:l,children:[s.jsx("option",{value:"",children:"すべての状態"}),s.jsx("option",{value:"PENDING",children:"PENDING"}),s.jsx("option",{value:"PAID",children:"PAID"}),s.jsx("option",{value:"CANCELLED",children:"CANCELLED"})]}),s.jsx("button",{type:"submit",children:"検索"})]}),g&&s.jsx("div",{className:d().meta,children:"読み込み中…"}),v&&(0,s.jsxs)("div",{className:d().error,children:["読み込みに失敗しました: ",v]}),_&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:d().meta,children:[_.meta.total,"件 / ",_.meta.page,"/",_.meta.totalPages,"ページ"]}),s.jsx("div",{className:d().tableWrap,children:(0,s.jsxs)("table",{className:d().table,children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{children:[s.jsx("th",{children:"作成"}),s.jsx("th",{children:"日付"}),s.jsx("th",{children:"枠"}),s.jsx("th",{children:"人数"}),s.jsx("th",{children:"金額"}),s.jsx("th",{children:"顧客"}),s.jsx("th",{children:"状態"}),s.jsx("th",{children:"詳細"})]})}),(0,s.jsxs)("tbody",{children:[_.items.map(e=>{let t=e.counts??{},a=(t.adult??0)+(t.student??0)+(t.child??0)+(t.infant??0);return(0,s.jsxs)("tr",{children:[s.jsx("td",{children:new Date(e.createdAt).toLocaleString("ja-JP")}),s.jsx("td",{children:new Date(e.date).toLocaleDateString("ja-JP")}),s.jsx("td",{children:e.slot}),s.jsx("td",{children:a}),(0,s.jsxs)("td",{children:["\xa5",e.amount.toLocaleString("ja-JP")]}),s.jsx("td",{children:e.customer?(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{children:e.customer.name}),s.jsx("div",{className:d().muted,children:e.customer.email})]}):s.jsx("span",{className:d().muted,children:"-"})}),s.jsx("td",{children:s.jsx("span",{className:`${d().chip} ${d()[`chip_${e.status.toLowerCase()}`]}`,children:e.status})}),s.jsx("td",{children:s.jsx(n.default,{href:`/admin/reservations/${e.id}`,children:"詳細"})})]},e.id)}),0===_.items.length&&s.jsx("tr",{children:s.jsx("td",{colSpan:8,style:{textAlign:"center",padding:24},children:"該当データがありません"})})]})]})}),s.jsx("div",{className:d().pager,children:Array.from({length:_.meta.totalPages}).map((e,t)=>{let a=t+1;return s.jsx(n.default,{href:f(a),className:`${d().pagebtn} ${a===_.meta.page?d().active:""}`,children:a},a)})})]})]})}},434:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var s=a(9404),r=a.n(s)},5047:(e,t,a)=>{"use strict";var s=a(7389);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},963:e=>{e.exports={shell:"layout_shell__VDS2f",sidebar:"layout_sidebar__91DNp",brand:"layout_brand__7r_EQ",brandLink:"layout_brandLink__Us7kf",brandMark:"layout_brandMark__kMwAP",brandText:"layout_brandText__saJb_",nav:"layout_nav__p8J2W",navItem:"layout_navItem___JPGO",navFooter:"layout_navFooter__HYW3U",navHelp:"layout_navHelp__FpSjQ",content:"layout_content__J04gB",header:"layout_header__hf7yS",headerTitle:"layout_headerTitle__rAQ6L",main:"layout_main__9mJd7",panel:"layout_panel__pBuc5"}},4690:e=>{e.exports={title:"page_title__I9XI_",toolbar:"page_toolbar__MVZUe",meta:"page_meta__clYRu",error:"page_error__OTsdL",tableWrap:"page_tableWrap__EqxdP",table:"page_table__fo9_Z",muted:"page_muted__OWUi0",chip:"page_chip__sKzwu",chip_paid:"page_chip_paid__jVo4J",chip_pending:"page_chip_pending__VUnyL",chip_cancelled:"page_chip_cancelled__OW8TY",pager:"page_pager__JYAaQ",pagebtn:"page_pagebtn__kz4AP",active:"page_active__qvc2W"}},596:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(9510),r=a(7371),n=a(963),i=a.n(n);function l({children:e}){return(0,s.jsxs)("div",{className:i().shell,children:[(0,s.jsxs)("aside",{className:i().sidebar,children:[s.jsx("div",{className:i().brand,children:(0,s.jsxs)(r.default,{href:"/admin",className:i().brandLink,children:[s.jsx("span",{className:i().brandMark,children:"●"}),s.jsx("span",{className:i().brandText,children:"Admin"})]})}),(0,s.jsxs)("nav",{className:i().nav,children:[s.jsx(r.default,{href:"/admin",className:i().navItem,children:"ダッシュボード"}),s.jsx(r.default,{href:"/admin/reservations",className:i().navItem,children:"予約一覧"}),s.jsx(r.default,{href:"/admin/customers",className:i().navItem,children:"顧客一覧"})]})]}),(0,s.jsxs)("div",{className:i().main,children:[(0,s.jsxs)("header",{className:i().header,children:[s.jsx("div",{className:i().headerTitle,children:"管理画面"}),s.jsx("div",{className:i().headerActions})]}),s.jsx("main",{className:i().content,children:e})]})]})}},4182:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`/Users/nagai/auto-loop-demo/app/admin/reservations/page.tsx#default`)},1506:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(9510);function r({children:e}){return s.jsx("html",{lang:"ja",children:s.jsx("body",{children:e})})}a(7272)},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[276,471,783],()=>a(4715));module.exports=s})();