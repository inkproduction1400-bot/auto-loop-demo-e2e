(()=>{var a={};a.id=779,a.ids=[779],a.modules={2934:a=>{"use strict";a.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:a=>{"use strict";a.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:a=>{"use strict";a.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2869:(a,e,d)=>{"use strict";d.r(e),d.d(e,{GlobalError:()=>n.a,__next_app__:()=>b,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>l}),d(6435),d(596),d(1506),d(5866);var s=d(3191),r=d(8716),t=d(7922),n=d.n(t),c=d(5231),i={};for(let a in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(a)&&(i[a]=()=>c[a]);d.d(e,i);let l=["",{children:["admin",{children:["reservations",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(d.bind(d,6435)),"/Users/nagai/auto-loop-demo/app/admin/reservations/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(d.bind(d,596)),"/Users/nagai/auto-loop-demo/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(d.bind(d,1506)),"/Users/nagai/auto-loop-demo/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(d.t.bind(d,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/nagai/auto-loop-demo/app/admin/reservations/[id]/page.tsx"],x="/admin/reservations/[id]/page",b={require:d,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/reservations/[id]/page",pathname:"/admin/reservations/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},2817:(a,e,d)=>{Promise.resolve().then(d.t.bind(d,9404,23))},4699:(a,e,d)=>{Promise.resolve().then(d.bind(d,9837))},9837:(a,e,d)=>{"use strict";d.r(e),d.d(e,{default:()=>l});var s=d(326),r=d(7626),t=d.n(r),n=d(7577),c=d(5047),i=d(434);function l(){let{id:a}=(0,c.useParams)(),e=(0,c.useRouter)(),[d,r]=(0,n.useState)(null),[l,o]=(0,n.useState)(!0),[x,b]=(0,n.useState)(null),[m,p]=(0,n.useState)(""),u=(0,n.useMemo)(()=>`/api/admin/reservations/${a}`,[a]),j=async a=>{confirm(`ステータスを ${a} に変更します。よろしいですか？`)&&(await fetch(u,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})}),e.refresh())},h=async()=>{await fetch(u,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({notes:m})}),e.refresh()},f=async()=>{confirm("この予約をキャンセルします。よろしいですか？")&&(await fetch(u,{method:"DELETE"}),e.refresh())};return(0,s.jsxs)("div",{className:"jsx-da822b772853cd05 wrap",children:[(0,s.jsxs)("div",{className:"jsx-da822b772853cd05 hdr",children:[s.jsx("h1",{className:"jsx-da822b772853cd05",children:"予約詳細"}),s.jsx("div",{className:"jsx-da822b772853cd05 gap"}),s.jsx(i.default,{href:"/admin/reservations",className:"btn ghost",children:"一覧に戻る"})]}),l&&s.jsx("div",{className:"jsx-da822b772853cd05 meta",children:"読み込み中…"}),x&&(0,s.jsxs)("div",{className:"jsx-da822b772853cd05 error",children:["読み込みに失敗しました: ",x]}),d&&s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:"jsx-da822b772853cd05 grid",children:[(0,s.jsxs)("div",{className:"jsx-da822b772853cd05 card",children:[s.jsx("div",{className:"jsx-da822b772853cd05 card-ttl",children:"概要"}),(0,s.jsxs)("dl",{className:"jsx-da822b772853cd05 dl",children:[s.jsx("dt",{className:"jsx-da822b772853cd05",children:"ID"}),s.jsx("dd",{className:"jsx-da822b772853cd05",children:d.id}),s.jsx("dt",{className:"jsx-da822b772853cd05",children:"作成"}),s.jsx("dd",{className:"jsx-da822b772853cd05",children:new Date(d.createdAt).toLocaleString("ja-JP")}),s.jsx("dt",{className:"jsx-da822b772853cd05",children:"更新"}),s.jsx("dd",{className:"jsx-da822b772853cd05",children:new Date(d.updatedAt).toLocaleString("ja-JP")}),s.jsx("dt",{className:"jsx-da822b772853cd05",children:"日付"}),s.jsx("dd",{className:"jsx-da822b772853cd05",children:new Date(d.date).toLocaleDateString("ja-JP")}),s.jsx("dt",{className:"jsx-da822b772853cd05",children:"枠"}),s.jsx("dd",{className:"jsx-da822b772853cd05",children:d.slot}),s.jsx("dt",{className:"jsx-da822b772853cd05",children:"人数"}),s.jsx("dd",{className:"jsx-da822b772853cd05",children:(()=>{let a=d.counts??{},e=(a.adult??0)+(a.student??0)+(a.child??0)+(a.infant??0);return`${e} 名（大人${a.adult??0} / 学生${a.student??0} / 小人${a.child??0} / 幼児${a.infant??0}）`})()}),s.jsx("dt",{className:"jsx-da822b772853cd05",children:"金額"}),(0,s.jsxs)("dd",{className:"jsx-da822b772853cd05",children:["\xa5",d.amount.toLocaleString("ja-JP")]}),s.jsx("dt",{className:"jsx-da822b772853cd05",children:"状態"}),s.jsx("dd",{className:"jsx-da822b772853cd05",children:s.jsx("span",{className:`jsx-da822b772853cd05 chip ${d.status.toLowerCase()}`,children:d.status})})]}),(0,s.jsxs)("div",{className:"jsx-da822b772853cd05 actions",children:[s.jsx("button",{onClick:()=>j("PAID"),className:"jsx-da822b772853cd05 btn",children:"支払い済みにする"}),s.jsx("button",{onClick:()=>j("PENDING"),className:"jsx-da822b772853cd05 btn",children:"保留に戻す"}),s.jsx("button",{onClick:f,className:"jsx-da822b772853cd05 btn danger",children:"キャンセル"})]})]}),(0,s.jsxs)("div",{className:"jsx-da822b772853cd05 card",children:[s.jsx("div",{className:"jsx-da822b772853cd05 card-ttl",children:"顧客"}),d.customer?(0,s.jsxs)("dl",{className:"jsx-da822b772853cd05 dl",children:[s.jsx("dt",{className:"jsx-da822b772853cd05",children:"氏名"}),s.jsx("dd",{className:"jsx-da822b772853cd05",children:d.customer.name??"-"}),s.jsx("dt",{className:"jsx-da822b772853cd05",children:"メール"}),s.jsx("dd",{className:"jsx-da822b772853cd05",children:d.customer.email??"-"}),s.jsx("dt",{className:"jsx-da822b772853cd05",children:"電話"}),s.jsx("dd",{className:"jsx-da822b772853cd05",children:d.customer.phone??"-"})]}):s.jsx("div",{className:"jsx-da822b772853cd05 muted",children:"顧客情報なし"}),s.jsx("div",{className:"jsx-da822b772853cd05 card-ttl mt",children:"メモ"}),s.jsx("textarea",{rows:6,value:m,onChange:a=>p(a.target.value),placeholder:"社内用メモを記入…",className:"jsx-da822b772853cd05 input"}),s.jsx("div",{className:"jsx-da822b772853cd05 actions",children:s.jsx("button",{onClick:h,className:"jsx-da822b772853cd05 btn primary",children:"メモを保存"})})]})]})}),s.jsx(t(),{id:"da822b772853cd05",children:".wrap.jsx-da822b772853cd05{display:grid;gap:12px}.hdr.jsx-da822b772853cd05{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:8px}.hdr.jsx-da822b772853cd05 h1.jsx-da822b772853cd05{margin:0;font-weight:900}.gap.jsx-da822b772853cd05{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.meta.jsx-da822b772853cd05{color:#64748b;font-size:13px}.error.jsx-da822b772853cd05{color:#b91c1c;background:#fee2e2;border:1px solid#fecaca;padding:8px 10px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}.grid.jsx-da822b772853cd05{display:grid;grid-template-columns:1fr 1fr;gap:16px}@media(max-width:960px){.grid.jsx-da822b772853cd05{grid-template-columns:1fr}}.card.jsx-da822b772853cd05{background:#fff;border:1px solid#e5e7eb;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:16px}.card-ttl.jsx-da822b772853cd05{font-weight:800;margin-bottom:8px}.dl.jsx-da822b772853cd05{display:grid;grid-template-columns:120px 1fr;gap:8px 12px;-webkit-box-align:start;-webkit-align-items:start;-moz-box-align:start;-ms-flex-align:start;align-items:start}.dl.jsx-da822b772853cd05 dt.jsx-da822b772853cd05{color:#64748b;font-size:12px}.dl.jsx-da822b772853cd05 dd.jsx-da822b772853cd05{margin:0}.actions.jsx-da822b772853cd05{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px;margin-top:12px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.btn.jsx-da822b772853cd05{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;border:1px solid#cbd5e1;background:#fff;color:#0f172a;padding:8px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;cursor:pointer}.btn.jsx-da822b772853cd05:hover{background:#f8fafc}.btn.primary.jsx-da822b772853cd05{background:#2563eb;color:#fff;border-color:#2563eb}.btn.ghost.jsx-da822b772853cd05{background:#fff}.btn.danger.jsx-da822b772853cd05{color:#b91c1c;border-color:#fecaca;background:#fff5f5}.chip.jsx-da822b772853cd05{padding:3px 8px;-webkit-border-radius:999px;-moz-border-radius:999px;border-radius:999px;font-size:12px;border:1px solid#cbd5e1}.chip.paid.jsx-da822b772853cd05{background:#ecfdf5;border-color:#bbf7d0;color:#0f766e}.chip.pending.jsx-da822b772853cd05{background:#fff7ed;border-color:#fed7aa;color:#c2410c}.chip.cancelled.jsx-da822b772853cd05{background:#fee2e2;border-color:#fecaca;color:#b91c1c}.muted.jsx-da822b772853cd05{color:#64748b;font-size:12px}.mt.jsx-da822b772853cd05{margin-top:12px}.input.jsx-da822b772853cd05{width:100%;border:1px solid#cbd5e1;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;padding:10px 12px;font-size:14px;background:#fff}"})]})}},434:(a,e,d)=>{"use strict";d.d(e,{default:()=>r.a});var s=d(9404),r=d.n(s)},5047:(a,e,d)=>{"use strict";var s=d(7389);d.o(s,"useParams")&&d.d(e,{useParams:function(){return s.useParams}}),d.o(s,"useRouter")&&d.d(e,{useRouter:function(){return s.useRouter}}),d.o(s,"useSearchParams")&&d.d(e,{useSearchParams:function(){return s.useSearchParams}})},963:a=>{a.exports={shell:"layout_shell__VDS2f",sidebar:"layout_sidebar__91DNp",brand:"layout_brand__7r_EQ",brandLink:"layout_brandLink__Us7kf",brandMark:"layout_brandMark__kMwAP",brandText:"layout_brandText__saJb_",nav:"layout_nav__p8J2W",navItem:"layout_navItem___JPGO",navFooter:"layout_navFooter__HYW3U",navHelp:"layout_navHelp__FpSjQ",content:"layout_content__J04gB",header:"layout_header__hf7yS",headerTitle:"layout_headerTitle__rAQ6L",main:"layout_main__9mJd7",panel:"layout_panel__pBuc5"}},596:(a,e,d)=>{"use strict";d.r(e),d.d(e,{default:()=>c});var s=d(9510),r=d(7371),t=d(963),n=d.n(t);function c({children:a}){return(0,s.jsxs)("div",{className:n().shell,children:[(0,s.jsxs)("aside",{className:n().sidebar,children:[s.jsx("div",{className:n().brand,children:(0,s.jsxs)(r.default,{href:"/admin",className:n().brandLink,children:[s.jsx("span",{className:n().brandMark,children:"●"}),s.jsx("span",{className:n().brandText,children:"Admin"})]})}),(0,s.jsxs)("nav",{className:n().nav,children:[s.jsx(r.default,{href:"/admin",className:n().navItem,children:"ダッシュボード"}),s.jsx(r.default,{href:"/admin/reservations",className:n().navItem,children:"予約一覧"}),s.jsx(r.default,{href:"/admin/customers",className:n().navItem,children:"顧客一覧"})]})]}),(0,s.jsxs)("div",{className:n().main,children:[(0,s.jsxs)("header",{className:n().header,children:[s.jsx("div",{className:n().headerTitle,children:"管理画面"}),s.jsx("div",{className:n().headerActions})]}),s.jsx("main",{className:n().content,children:a})]})]})}},6435:(a,e,d)=>{"use strict";d.r(e),d.d(e,{default:()=>s});let s=(0,d(8570).createProxy)(String.raw`/Users/nagai/auto-loop-demo/app/admin/reservations/[id]/page.tsx#default`)}};var e=require("../../../../webpack-runtime.js");e.C(a);var d=a=>e(e.s=a),s=e.X(0,[276,471,783,911],()=>d(2869));module.exports=s})();