(()=>{var e={};e.id=978,e.ids=[978],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},957:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>l,routeModule:()=>b,tree:()=>o});var d=s(260),r=s(8203),t=s(5155),n=s.n(t),i=s(7292),c={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(a,c);let o={children:["",{children:["admin",{children:["reservations",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8860)),"/Users/nagai/auto-loop-demo/app/admin/reservations/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7280)),"/Users/nagai/auto-loop-demo/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,9611)),"/Users/nagai/auto-loop-demo/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,1485,23)),"next/dist/client/components/unauthorized-error"]}]}.children,l=["/Users/nagai/auto-loop-demo/app/admin/reservations/[id]/page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},b=new d.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/admin/reservations/[id]/page",pathname:"/admin/reservations/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},3921:e=>{e.exports={shell:"layout_shell__VDS2f",sidebar:"layout_sidebar__91DNp",brand:"layout_brand__7r_EQ",brandLink:"layout_brandLink__Us7kf",brandMark:"layout_brandMark__kMwAP",brandText:"layout_brandText__saJb_",nav:"layout_nav__p8J2W",navItem:"layout_navItem___JPGO",navFooter:"layout_navFooter__HYW3U",navHelp:"layout_navHelp__FpSjQ",content:"layout_content__J04gB",header:"layout_header__hf7yS",headerTitle:"layout_headerTitle__rAQ6L",main:"layout_main__9mJd7",panel:"layout_panel__pBuc5"}},4647:(e,a,s)=>{Promise.resolve().then(s.bind(s,8860))},5840:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>l});var d=s(5512),r=s(63),t=s.n(r),n=s(8009),i=s(9334),c=s(8531),o=s.n(c);function l(){let{id:e}=(0,i.useParams)(),a=(0,i.useRouter)(),[s,r]=(0,n.useState)(null),[c,l]=(0,n.useState)(!0),[x,b]=(0,n.useState)(null),[p,m]=(0,n.useState)(""),u=(0,n.useMemo)(()=>`/api/admin/reservations/${e}`,[e]),j=async e=>{confirm(`ステータスを ${e} に変更します。よろしいですか？`)&&(await fetch(u,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})}),a.refresh())},h=async()=>{await fetch(u,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({notes:p})}),a.refresh()},f=async()=>{confirm("この予約をキャンセルします。よろしいですか？")&&(await fetch(u,{method:"DELETE"}),a.refresh())};return(0,d.jsxs)("div",{className:"jsx-da822b772853cd05 wrap",children:[(0,d.jsxs)("div",{className:"jsx-da822b772853cd05 hdr",children:[(0,d.jsx)("h1",{className:"jsx-da822b772853cd05",children:"予約詳細"}),(0,d.jsx)("div",{className:"jsx-da822b772853cd05 gap"}),(0,d.jsx)(o(),{href:"/admin/reservations",className:"btn ghost",children:"一覧に戻る"})]}),c&&(0,d.jsx)("div",{className:"jsx-da822b772853cd05 meta",children:"読み込み中…"}),x&&(0,d.jsxs)("div",{className:"jsx-da822b772853cd05 error",children:["読み込みに失敗しました: ",x]}),s&&(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"jsx-da822b772853cd05 grid",children:[(0,d.jsxs)("div",{className:"jsx-da822b772853cd05 card",children:[(0,d.jsx)("div",{className:"jsx-da822b772853cd05 card-ttl",children:"概要"}),(0,d.jsxs)("dl",{className:"jsx-da822b772853cd05 dl",children:[(0,d.jsx)("dt",{className:"jsx-da822b772853cd05",children:"ID"}),(0,d.jsx)("dd",{className:"jsx-da822b772853cd05",children:s.id}),(0,d.jsx)("dt",{className:"jsx-da822b772853cd05",children:"作成"}),(0,d.jsx)("dd",{className:"jsx-da822b772853cd05",children:new Date(s.createdAt).toLocaleString("ja-JP")}),(0,d.jsx)("dt",{className:"jsx-da822b772853cd05",children:"更新"}),(0,d.jsx)("dd",{className:"jsx-da822b772853cd05",children:new Date(s.updatedAt).toLocaleString("ja-JP")}),(0,d.jsx)("dt",{className:"jsx-da822b772853cd05",children:"日付"}),(0,d.jsx)("dd",{className:"jsx-da822b772853cd05",children:new Date(s.date).toLocaleDateString("ja-JP")}),(0,d.jsx)("dt",{className:"jsx-da822b772853cd05",children:"枠"}),(0,d.jsx)("dd",{className:"jsx-da822b772853cd05",children:s.slot}),(0,d.jsx)("dt",{className:"jsx-da822b772853cd05",children:"人数"}),(0,d.jsx)("dd",{className:"jsx-da822b772853cd05",children:(()=>{let e=s.counts??{},a=(e.adult??0)+(e.student??0)+(e.child??0)+(e.infant??0);return`${a} 名（大人${e.adult??0} / 学生${e.student??0} / 小人${e.child??0} / 幼児${e.infant??0}）`})()}),(0,d.jsx)("dt",{className:"jsx-da822b772853cd05",children:"金額"}),(0,d.jsxs)("dd",{className:"jsx-da822b772853cd05",children:["\xa5",s.amount.toLocaleString("ja-JP")]}),(0,d.jsx)("dt",{className:"jsx-da822b772853cd05",children:"状態"}),(0,d.jsx)("dd",{className:"jsx-da822b772853cd05",children:(0,d.jsx)("span",{className:`jsx-da822b772853cd05 chip ${s.status.toLowerCase()}`,children:s.status})})]}),(0,d.jsxs)("div",{className:"jsx-da822b772853cd05 actions",children:[(0,d.jsx)("button",{onClick:()=>j("PAID"),className:"jsx-da822b772853cd05 btn",children:"支払い済みにする"}),(0,d.jsx)("button",{onClick:()=>j("PENDING"),className:"jsx-da822b772853cd05 btn",children:"保留に戻す"}),(0,d.jsx)("button",{onClick:f,className:"jsx-da822b772853cd05 btn danger",children:"キャンセル"})]})]}),(0,d.jsxs)("div",{className:"jsx-da822b772853cd05 card",children:[(0,d.jsx)("div",{className:"jsx-da822b772853cd05 card-ttl",children:"顧客"}),s.customer?(0,d.jsxs)("dl",{className:"jsx-da822b772853cd05 dl",children:[(0,d.jsx)("dt",{className:"jsx-da822b772853cd05",children:"氏名"}),(0,d.jsx)("dd",{className:"jsx-da822b772853cd05",children:s.customer.name??"-"}),(0,d.jsx)("dt",{className:"jsx-da822b772853cd05",children:"メール"}),(0,d.jsx)("dd",{className:"jsx-da822b772853cd05",children:s.customer.email??"-"}),(0,d.jsx)("dt",{className:"jsx-da822b772853cd05",children:"電話"}),(0,d.jsx)("dd",{className:"jsx-da822b772853cd05",children:s.customer.phone??"-"})]}):(0,d.jsx)("div",{className:"jsx-da822b772853cd05 muted",children:"顧客情報なし"}),(0,d.jsx)("div",{className:"jsx-da822b772853cd05 card-ttl mt",children:"メモ"}),(0,d.jsx)("textarea",{rows:6,value:p,onChange:e=>m(e.target.value),placeholder:"社内用メモを記入…",className:"jsx-da822b772853cd05 input"}),(0,d.jsx)("div",{className:"jsx-da822b772853cd05 actions",children:(0,d.jsx)("button",{onClick:h,className:"jsx-da822b772853cd05 btn primary",children:"メモを保存"})})]})]})}),(0,d.jsx)(t(),{id:"da822b772853cd05",children:".wrap.jsx-da822b772853cd05{display:grid;gap:12px}.hdr.jsx-da822b772853cd05{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:8px}.hdr.jsx-da822b772853cd05 h1.jsx-da822b772853cd05{margin:0;font-weight:900}.gap.jsx-da822b772853cd05{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.meta.jsx-da822b772853cd05{color:#64748b;font-size:13px}.error.jsx-da822b772853cd05{color:#b91c1c;background:#fee2e2;border:1px solid#fecaca;padding:8px 10px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}.grid.jsx-da822b772853cd05{display:grid;grid-template-columns:1fr 1fr;gap:16px}@media(max-width:960px){.grid.jsx-da822b772853cd05{grid-template-columns:1fr}}.card.jsx-da822b772853cd05{background:#fff;border:1px solid#e5e7eb;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:16px}.card-ttl.jsx-da822b772853cd05{font-weight:800;margin-bottom:8px}.dl.jsx-da822b772853cd05{display:grid;grid-template-columns:120px 1fr;gap:8px 12px;-webkit-box-align:start;-webkit-align-items:start;-moz-box-align:start;-ms-flex-align:start;align-items:start}.dl.jsx-da822b772853cd05 dt.jsx-da822b772853cd05{color:#64748b;font-size:12px}.dl.jsx-da822b772853cd05 dd.jsx-da822b772853cd05{margin:0}.actions.jsx-da822b772853cd05{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px;margin-top:12px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.btn.jsx-da822b772853cd05{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;border:1px solid#cbd5e1;background:#fff;color:#0f172a;padding:8px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;cursor:pointer}.btn.jsx-da822b772853cd05:hover{background:#f8fafc}.btn.primary.jsx-da822b772853cd05{background:#2563eb;color:#fff;border-color:#2563eb}.btn.ghost.jsx-da822b772853cd05{background:#fff}.btn.danger.jsx-da822b772853cd05{color:#b91c1c;border-color:#fecaca;background:#fff5f5}.chip.jsx-da822b772853cd05{padding:3px 8px;-webkit-border-radius:999px;-moz-border-radius:999px;border-radius:999px;font-size:12px;border:1px solid#cbd5e1}.chip.paid.jsx-da822b772853cd05{background:#ecfdf5;border-color:#bbf7d0;color:#0f766e}.chip.pending.jsx-da822b772853cd05{background:#fff7ed;border-color:#fed7aa;color:#c2410c}.chip.cancelled.jsx-da822b772853cd05{background:#fee2e2;border-color:#fecaca;color:#b91c1c}.muted.jsx-da822b772853cd05{color:#64748b;font-size:12px}.mt.jsx-da822b772853cd05{margin-top:12px}.input.jsx-da822b772853cd05{width:100%;border:1px solid#cbd5e1;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;padding:10px 12px;font-size:14px;background:#fff}"})]})}},7280:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>c});var d=s(2740),r=s(9607),t=s.n(r),n=s(3921),i=s.n(n);function c({children:e}){return(0,d.jsxs)("div",{className:i().shell,children:[(0,d.jsxs)("aside",{className:i().sidebar,children:[(0,d.jsx)("div",{className:i().brand,children:(0,d.jsxs)(t(),{href:"/admin",className:i().brandLink,children:[(0,d.jsx)("span",{className:i().brandMark,children:"●"}),(0,d.jsx)("span",{className:i().brandText,children:"Admin"})]})}),(0,d.jsxs)("nav",{className:i().nav,children:[(0,d.jsx)(t(),{href:"/admin",className:i().navItem,children:"ダッシュボード"}),(0,d.jsx)(t(),{href:"/admin/reservations",className:i().navItem,children:"予約一覧"}),(0,d.jsx)(t(),{href:"/admin/customers",className:i().navItem,children:"顧客一覧"})]})]}),(0,d.jsxs)("div",{className:i().main,children:[(0,d.jsxs)("header",{className:i().header,children:[(0,d.jsx)("div",{className:i().headerTitle,children:"管理画面"}),(0,d.jsx)("div",{className:i().headerActions})]}),(0,d.jsx)("main",{className:i().content,children:e})]})]})}},8860:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>d});let d=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/nagai/auto-loop-demo/app/admin/reservations/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nagai/auto-loop-demo/app/admin/reservations/[id]/page.tsx","default")},9032:(e,a,s)=>{Promise.resolve().then(s.t.bind(s,8531,23))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9236:(e,a,s)=>{Promise.resolve().then(s.bind(s,5840))},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9304:(e,a,s)=>{Promise.resolve().then(s.t.bind(s,9607,23))},9334:(e,a,s)=>{"use strict";var d=s(8686);s.o(d,"useParams")&&s.d(a,{useParams:function(){return d.useParams}}),s.o(d,"useRouter")&&s.d(a,{useRouter:function(){return d.useRouter}}),s.o(d,"useSearchParams")&&s.d(a,{useSearchParams:function(){return d.useSearchParams}})}};var a=require("../../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),d=a.X(0,[638,999,977,107],()=>s(957));module.exports=d})();