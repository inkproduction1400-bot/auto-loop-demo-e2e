(()=>{var e={};e.id=781,e.ids=[781],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1466:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d}),a(3722),a(596),a(1506),a(5866);var s=a(3191),r=a(8716),n=a(7922),i=a.n(n),l=a(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["admin",{children:["customers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3722)),"/Users/nagai/auto-loop-demo/app/admin/customers/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,596)),"/Users/nagai/auto-loop-demo/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,1506)),"/Users/nagai/auto-loop-demo/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/nagai/auto-loop-demo/app/admin/customers/page.tsx"],m="/admin/customers/page",u={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/customers/page",pathname:"/admin/customers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9302:(e,t,a)=>{Promise.resolve().then(a.bind(a,2428))},2817:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,9404,23))},7794:()=>{},2126:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},2428:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(326),r=a(7577),n=a(434),i=a(5047),l=a(5926),o=a.n(l);let d=(e,t,a="")=>(e.get(t)??a).trim(),c=(e,t,a)=>{let s=Number.parseInt(e.get(t)??"",10);return Number.isFinite(s)&&s>0?s:a};function m(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),a=d(t,"q"),l=c(t,"page",1),m=Math.min(100,c(t,"size",20));(0,r.useMemo)(()=>{let e=new URLSearchParams;return a&&e.set("q",a),e.set("page",String(l)),e.set("size",String(m)),`/api/admin/customers?${e.toString()}`},[a,l,m]);let[u,h]=(0,r.useState)(null),[_,p]=(0,r.useState)(!0),[x,g]=(0,r.useState)(null),j=e=>{let a=new URLSearchParams(t.toString());return a.set("page",String(e)),a.set("size",String(m)),`/admin/customers?${a.toString()}`};return(0,s.jsxs)(s.Fragment,{children:[s.jsx("h1",{className:o().title,children:"顧客一覧"}),(0,s.jsxs)("form",{className:o().toolbar,onSubmit:t=>{t.preventDefault();let a=new FormData(t.currentTarget),s=new URLSearchParams,r=String(a.get("q")??"").trim();r&&s.set("q",r),s.set("page","1"),s.set("size",String(m)),e.push(`/admin/customers?${s.toString()}`)},children:[s.jsx("input",{name:"q",placeholder:"氏名/メール/電話",defaultValue:a}),s.jsx("button",{type:"submit",children:"検索"})]}),_&&s.jsx("div",{className:o().meta,children:"読み込み中…"}),x&&(0,s.jsxs)("div",{className:o().error,children:["読み込みに失敗しました: ",x]}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:o().meta,children:[u.meta.total,"件 / ",u.meta.page,"/",u.meta.totalPages,"ページ"]}),s.jsx("div",{className:o().tableWrap,children:(0,s.jsxs)("table",{className:o().table,children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{children:[s.jsx("th",{children:"作成"}),s.jsx("th",{children:"氏名"}),s.jsx("th",{children:"メール"}),s.jsx("th",{children:"電話"}),s.jsx("th",{children:"予約数"})]})}),(0,s.jsxs)("tbody",{children:[u.items.map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{children:new Date(e.createdAt).toLocaleString("ja-JP")}),s.jsx("td",{children:e.name??"-"}),s.jsx("td",{children:e.email??"-"}),s.jsx("td",{children:e.phone??"-"}),s.jsx("td",{children:s.jsx(n.default,{href:`/admin/reservations?q=${encodeURIComponent(e.email??"")}`,children:e._count.reservations})})]},e.id)),0===u.items.length&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,style:{textAlign:"center",padding:24},children:"データがありません"})})]})]})}),s.jsx("div",{className:o().pager,children:Array.from({length:u.meta.totalPages}).map((e,t)=>{let a=t+1;return s.jsx(n.default,{href:j(a),className:`${o().pagebtn} ${a===u.meta.page?o().active:""}`,children:a},a)})})]})]})}function u(){return s.jsx(r.Suspense,{fallback:s.jsx("div",{children:"読み込み中…"}),children:s.jsx(m,{})})}},434:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var s=a(9404),r=a.n(s)},5047:(e,t,a)=>{"use strict";var s=a(7389);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},5926:e=>{e.exports={title:"customers_title__QUPQm",toolbar:"customers_toolbar__tltFK",meta:"customers_meta___deC_",error:"customers_error__WxXux",tableWrap:"customers_tableWrap__zoLgY",table:"customers_table__FP_wm",pager:"customers_pager__sslEC",pagebtn:"customers_pagebtn__L_PGF",active:"customers_active__uGMVo"}},963:e=>{e.exports={shell:"layout_shell__VDS2f",sidebar:"layout_sidebar__91DNp",brand:"layout_brand__7r_EQ",brandLink:"layout_brandLink__Us7kf",brandMark:"layout_brandMark__kMwAP",brandText:"layout_brandText__saJb_",nav:"layout_nav__p8J2W",navItem:"layout_navItem___JPGO",navFooter:"layout_navFooter__HYW3U",navHelp:"layout_navHelp__FpSjQ",content:"layout_content__J04gB",header:"layout_header__hf7yS",headerTitle:"layout_headerTitle__rAQ6L",main:"layout_main__9mJd7",panel:"layout_panel__pBuc5"}},3722:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`/Users/nagai/auto-loop-demo/app/admin/customers/page.tsx#default`)},596:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(9510),r=a(7371),n=a(963),i=a.n(n);function l({children:e}){return(0,s.jsxs)("div",{className:i().shell,children:[(0,s.jsxs)("aside",{className:i().sidebar,children:[s.jsx("div",{className:i().brand,children:(0,s.jsxs)(r.default,{href:"/admin",className:i().brandLink,children:[s.jsx("span",{className:i().brandMark,children:"●"}),s.jsx("span",{className:i().brandText,children:"Admin"})]})}),(0,s.jsxs)("nav",{className:i().nav,children:[s.jsx(r.default,{href:"/admin",className:i().navItem,children:"ダッシュボード"}),s.jsx(r.default,{href:"/admin/reservations",className:i().navItem,children:"予約一覧"}),s.jsx(r.default,{href:"/admin/customers",className:i().navItem,children:"顧客一覧"})]})]}),(0,s.jsxs)("div",{className:i().main,children:[(0,s.jsxs)("header",{className:i().header,children:[s.jsx("div",{className:i().headerTitle,children:"管理画面"}),s.jsx("div",{className:i().headerActions})]}),s.jsx("main",{className:i().content,children:e})]})]})}},1506:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(9510);function r({children:e}){return s.jsx("html",{lang:"ja",children:s.jsx("body",{children:e})})}a(7272)},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[276,471,783],()=>a(1466));module.exports=s})();